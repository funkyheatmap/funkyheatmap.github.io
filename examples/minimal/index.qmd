---
title: Minimal reproducible example
---

## R
```{r include=FALSE, warnings=FALSE}
library(dplyr)

dir <- "."
# dir <- "examples/minimal"

data <- readr::read_tsv(paste0(dir, "/data/data.tsv")) %>%
  mutate_at(
    c("categories1", "categories2", "categories3"),
    function(column) {
      lapply(column, function(val) {
        unlist(jsonlite::fromJSON(gsub("\\\\\"", "\"", val)))
      })
    }
  ) %>%
  mutate_at(vars(ends_with("_str")), as.character)
column_info <- readr::read_tsv(paste0(dir, "/data/column_info.tsv"))
column_groups <- readr::read_tsv(paste0(dir, "/data/column_groups.tsv"))
row_info <- readr::read_tsv(paste0(dir, "/data/row_info.tsv"))
row_groups <- readr::read_tsv(paste0(dir, "/data/row_groups.tsv"))
palettes <- jsonlite::read_json(paste0(dir, "/data/palettes.json"), simplifyVector = TRUE)
palettes$pie <- unlist(palettes$pie)
```

```{r}
g <- funkyheatmap::funky_heatmap(
  data = data,
  column_info = column_info,
  column_groups = column_groups,
  row_info = row_info,
  row_groups = row_groups,
  palettes = palettes
)
```

```{r include=FALSE}
knitr::opts_chunk$set(fig.width = g$width, fig.height = g$height)
```

```{r}
g
```